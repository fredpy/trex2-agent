<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>trex: trex/transaction/TeleoReactor.hh Source File</title>

<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">trex
   &#160;<span id="projectnumber">0.3.3</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript" src="../../dynsections.js"></script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="../../index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="../../pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="../../modules.html"><span>Modules</span></a></li>
      <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="../../annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="../../files.html"><span>Files</span></a></li>
      <li><a href="../../dirs.html"><span>Directories</span></a></li>
      <li><a href="../../examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="../../files.html"><span>File&#160;List</span></a></li>
      <li><a href="../../globals.html"><span>File&#160;Members</span></a></li>
    </ul>
  </div>
  <div id="nav-path" class="navpath">
    <ul>
      <li class="navelem"><a class="el" href="../../dir_3a4d9f6cc8120f556e728dbddec0f000.html">trex</a>      </li>
      <li class="navelem"><a class="el" href="../../dir_923cafbf011894ca738df004b39a077b.html">transaction</a>      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<div class="title">TeleoReactor.hh</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../db/d0f/TeleoReactor_8hh.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 
<a name="l00009"></a>00009 <span class="comment">/*********************************************************************</span>
<a name="l00010"></a>00010 <span class="comment"> * Software License Agreement (BSD License)</span>
<a name="l00011"></a>00011 <span class="comment"> *</span>
<a name="l00012"></a>00012 <span class="comment"> *  Copyright (c) 2011, MBARI.</span>
<a name="l00013"></a>00013 <span class="comment"> *  All rights reserved.</span>
<a name="l00014"></a>00014 <span class="comment"> *</span>
<a name="l00015"></a>00015 <span class="comment"> *  Redistribution and use in source and binary forms, with or without</span>
<a name="l00016"></a>00016 <span class="comment"> *  modification, are permitted provided that the following conditions</span>
<a name="l00017"></a>00017 <span class="comment"> *  are met:</span>
<a name="l00018"></a>00018 <span class="comment"> *</span>
<a name="l00019"></a>00019 <span class="comment"> *   * Redistributions of source code must retain the above copyright</span>
<a name="l00020"></a>00020 <span class="comment"> *     notice, this list of conditions and the following disclaimer.</span>
<a name="l00021"></a>00021 <span class="comment"> *   * Redistributions in binary form must reproduce the above</span>
<a name="l00022"></a>00022 <span class="comment"> *     copyright notice, this list of conditions and the following</span>
<a name="l00023"></a>00023 <span class="comment"> *     disclaimer in the documentation and/or other materials provided</span>
<a name="l00024"></a>00024 <span class="comment"> *     with the distribution.</span>
<a name="l00025"></a>00025 <span class="comment"> *   * Neither the name of the TREX Project nor the names of its</span>
<a name="l00026"></a>00026 <span class="comment"> *     contributors may be used to endorse or promote products derived</span>
<a name="l00027"></a>00027 <span class="comment"> *     from this software without specific prior written permission.</span>
<a name="l00028"></a>00028 <span class="comment"> *</span>
<a name="l00029"></a>00029 <span class="comment"> *  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS</span>
<a name="l00030"></a>00030 <span class="comment"> *  &quot;AS IS&quot; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT</span>
<a name="l00031"></a>00031 <span class="comment"> *  LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS</span>
<a name="l00032"></a>00032 <span class="comment"> *  FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE</span>
<a name="l00033"></a>00033 <span class="comment"> *  COPYRIGHT OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,</span>
<a name="l00034"></a>00034 <span class="comment"> *  INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING,</span>
<a name="l00035"></a>00035 <span class="comment"> *  BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;</span>
<a name="l00036"></a>00036 <span class="comment"> *  LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER</span>
<a name="l00037"></a>00037 <span class="comment"> *  CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT</span>
<a name="l00038"></a>00038 <span class="comment"> *  LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN</span>
<a name="l00039"></a>00039 <span class="comment"> *  ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00040"></a>00040 <span class="comment"> *  POSSIBILITY OF SUCH DAMAGE.</span>
<a name="l00041"></a>00041 <span class="comment"> */</span>
<a name="l00042"></a>00042 <span class="preprocessor">#ifndef H_TeleoReactor</span>
<a name="l00043"></a>00043 <span class="preprocessor"></span><span class="preprocessor"># define H_TeleoReactor</span>
<a name="l00044"></a>00044 <span class="preprocessor"></span>
<a name="l00045"></a>00045 <span class="preprocessor"># include &lt;cmath&gt;</span>
<a name="l00046"></a>00046 
<a name="l00047"></a>00047 <span class="preprocessor"># include &quot;<a class="code" href="../../d3/d7b/external_8hh.html" title="external timeline external utilities">bits/external.hh</a>&quot;</span>
<a name="l00048"></a>00048 <span class="preprocessor"># include &quot;reactor_graph.hh&quot;</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 <span class="preprocessor"># include &lt;boost/chrono.hpp&gt;</span>
<a name="l00051"></a>00051 <span class="preprocessor"># include &lt;boost/chrono/thread_clock.hpp&gt;</span>
<a name="l00052"></a>00052 
<a name="l00053"></a>00053 <span class="keyword">namespace </span>TREX {
<a name="l00054"></a>00054   <span class="keyword">namespace </span>transaction {
<a name="l00055"></a>00055 
<a name="l00089"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html">00089</a>     <span class="keyword">class </span><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html" title="TeleoReactor abstract interface.">TeleoReactor</a> :boost::noncopyable {
<a name="l00090"></a>00090       <span class="keyword">typedef</span> <a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html">details::timeline_set</a>                       <a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html">internal_set</a>;
<a name="l00091"></a>00091       <span class="keyword">typedef</span> <a class="code" href="../../db/db4/group__transaction.html#ga85e33a6d5a14bff2efc0b3832a1cf3c3" title="external timelines">details::external_set</a>                       external_set;
<a name="l00092"></a>00092  
<a name="l00093"></a>00093     <span class="keyword">public</span>:
<a name="l00098"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a1df6347b2d49a9b7b5a19695a35c4a6b">00098</a>       <span class="keyword">typedef</span> <a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html#a5ff47dd2421381f5c3d0a45f5543dee2" title="reactor ID type">graph::reactor_id</a>                   <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a1df6347b2d49a9b7b5a19695a35c4a6b" title="Reactor reference type.">ref_type</a>;
<a name="l00103"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#adcb6eb0be2820aaa41073e2d2ecb0104">00103</a>       <span class="keyword">typedef</span> <a class="code" href="../../dc/d78/classTREX_1_1utils_1_1XmlFactory.html">graph::xml_factory</a>                  <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#adcb6eb0be2820aaa41073e2d2ecb0104" title="XML based factory.">xml_factory</a>;
<a name="l00115"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a220daced8bfd779d72905a7d28276000">00115</a>       <span class="keyword">typedef</span> xml_factory::argument_type          <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a220daced8bfd779d72905a7d28276000" title="XML construction info.">xml_arg_type</a>;
<a name="l00116"></a>00116 
<a name="l00160"></a>00160       <span class="keyword">explicit</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8499db1d82809eb0703f9a6741b35186" title="XML based constructor.">TeleoReactor</a>(<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a220daced8bfd779d72905a7d28276000" title="XML construction info.">xml_arg_type</a> &amp;arg, <span class="keywordtype">bool</span> loadTL=<span class="keyword">true</span>, 
<a name="l00161"></a>00161                          <span class="keywordtype">bool</span> log_default=<span class="keyword">true</span>);
<a name="l00163"></a>00163       <span class="keyword">virtual</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ac19bda9c94029fff275483a25f04df2a" title="Destructor.">~TeleoReactor</a>();
<a name="l00164"></a>00164 
<a name="l00168"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8facf8e8ea1ba386fa07bffb25881379">00168</a>       <a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8facf8e8ea1ba386fa07bffb25881379" title="Reactor name.">getName</a>()<span class="keyword"> const </span>{
<a name="l00169"></a>00169        <span class="keywordflow">return</span> m_name;
<a name="l00170"></a>00170       }
<a name="l00187"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a94f89daf3b2f2e58380ecf7d543f1d04">00187</a>       <a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a94f89daf3b2f2e58380ecf7d543f1d04" title="get "agent" name">getAgentName</a>()<span class="keyword"> const </span>{
<a name="l00188"></a>00188        <span class="keywordflow">return</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ab4a83407c7ad5fc27cc9ab70a0c5d630" title="Get graph name.">getGraphName</a>();
<a name="l00189"></a>00189       }
<a name="l00196"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ab4a83407c7ad5fc27cc9ab70a0c5d630">00196</a>       <a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ab4a83407c7ad5fc27cc9ab70a0c5d630" title="Get graph name.">getGraphName</a>()<span class="keyword"> const </span>{
<a name="l00197"></a>00197        <span class="keywordflow">return</span> m_graph.<a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html#ad28b49eeb842c27b5904ac4e8039b9f4" title="Graph name.">getName</a>();
<a name="l00198"></a>00198       }
<a name="l00206"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a349b50099b6434604d311a1dd99c748c">00206</a>       <a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html" title="Transactions graph.">graph</a> <span class="keyword">const</span> &amp;<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a349b50099b6434604d311a1dd99c748c" title="Get graph.">getGraph</a>()<span class="keyword"> const </span>{
<a name="l00207"></a>00207         <span class="keywordflow">return</span> m_graph;
<a name="l00208"></a>00208       }
<a name="l00209"></a>00209 
<a name="l00223"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a10b44ea7bbeb13a23528f82c3c7c78c3">00223</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a10b44ea7bbeb13a23528f82c3c7c78c3" title="reactor initial tick">getInitialTick</a>()<span class="keyword"> const </span>{
<a name="l00224"></a>00224        <span class="keywordflow">return</span> m_initialTick;
<a name="l00225"></a>00225       }
<a name="l00234"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aae9a63f545390491e4721b8b74e05585">00234</a>       <span class="keywordtype">double</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aae9a63f545390491e4721b8b74e05585" title="Tick duration.">tickDuration</a>()<span class="keyword"> const </span>{
<a name="l00235"></a>00235        <span class="keywordflow">return</span> m_graph.<a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html#ae59010979c7d9c7c64928566bf79adcd" title="get tick duration">tickDuration</a>();
<a name="l00236"></a>00236       }
<a name="l00237"></a>00237 
<a name="l00253"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a710edd7eefe154b521e75dd42b3bf635">00253</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a710edd7eefe154b521e75dd42b3bf635" title="unix time to tick conversion">timeToTick</a>(time_t secs, suseconds_t usecs=0)<span class="keyword"> const </span>{
<a name="l00254"></a>00254        <span class="keywordflow">return</span> m_graph.<a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html#a7fdffec0b7157c51702fcf7f7fe50703" title="convert real-time into a TICK">timeToTick</a>(secs, usecs);
<a name="l00255"></a>00255       }
<a name="l00270"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a5ecfd6df6f39f6b6575e3853e8630fa7">00270</a>       <span class="keywordtype">double</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a5ecfd6df6f39f6b6575e3853e8630fa7" title="tick to unix time conversion">tickToTime</a>(<a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> cur)<span class="keyword"> const </span>{
<a name="l00271"></a>00271        <span class="keywordflow">return</span> m_graph.<a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html#ab5e911ffbb716753580988c220bde88e" title="convert a TICK into its real-time equivalent">tickToTime</a>(cur);
<a name="l00272"></a>00272       }
<a name="l00281"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ae8ea840f31e81735b8b0481f0608d535">00281</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ae8ea840f31e81735b8b0481f0608d535" title="Get current tick.">getCurrentTick</a>()<span class="keyword"> const </span>{
<a name="l00282"></a>00282        <span class="keywordflow">return</span> m_graph.<a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html#a300d3483bf0bcf93a143451aa8b82426" title="get current tick">getCurrentTick</a>();
<a name="l00283"></a>00283       }
<a name="l00297"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aef17ce86509d19a00792feccbcf84a67">00297</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aef17ce86509d19a00792feccbcf84a67" title="Get final tick.">getFinalTick</a>()<span class="keyword"> const </span>{
<a name="l00298"></a>00298        <span class="keywordflow">return</span> m_finalTick;
<a name="l00299"></a>00299       }
<a name="l00310"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a9f1b95cdfe53ed059969452c9f250e82">00310</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a9f1b95cdfe53ed059969452c9f250e82" title="reactor latency">getLatency</a>()<span class="keyword"> const </span>{
<a name="l00311"></a>00311        <span class="keywordflow">return</span> m_latency;
<a name="l00312"></a>00312       }
<a name="l00327"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#add69075d64568c035f0a83fc1824a57c">00327</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#add69075d64568c035f0a83fc1824a57c" title="reactor execution latency">getExecLatency</a>()<span class="keyword"> const </span>{
<a name="l00328"></a>00328        <span class="keywordflow">return</span> m_latency+m_maxDelay;
<a name="l00329"></a>00329       }
<a name="l00337"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aa85f8e0c6f77b4f9eff83d829fe3dba6">00337</a>       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aa85f8e0c6f77b4f9eff83d829fe3dba6" title="Get reactor look-ahead.">getLookAhead</a>()<span class="keyword"> const </span>{
<a name="l00338"></a>00338        <span class="keywordflow">return</span> m_lookahead;
<a name="l00339"></a>00339       }
<a name="l00354"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a184feb70d4f444edb13fd627bd3b26be">00354</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a184feb70d4f444edb13fd627bd3b26be">notify</a>(<a class="code" href="../../de/d8d/classTREX_1_1transaction_1_1Observation.html" title="Reactor observation.">Observation</a> <span class="keyword">const</span> &amp;obs) {}
<a name="l00355"></a>00355 
<a name="l00377"></a>00377       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#abdfbc3a11ed2046f2fa6a8ed707b7aab" title="Final initialization.">initialize</a>(<a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> <span class="keyword">final</span>);
<a name="l00378"></a>00378 
<a name="l00387"></a>00387       <span class="keywordtype">bool</span>   <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7efd36a98191a8fbb3fac34220684c2f" title="New tick notification callback.">newTick</a>();
<a name="l00404"></a>00404       <span class="keywordtype">bool</span>   <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a129024145aba1e2b36f5f5c434fb4b4d" title="Synchronization callback.">doSynchronize</a>();
<a name="l00417"></a>00417       <span class="keywordtype">double</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a94fcfd208b96e964b5503934dfa7debf" title="reactor deliberation work load">workRatio</a>();
<a name="l00427"></a>00427       <span class="keywordtype">void</span>   <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ae1f44350631b953137d17ab53efa4707" title="Deliberation step.">step</a>();
<a name="l00428"></a>00428 
<a name="l00434"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8732d422d9951bde9c8fb33c702d18ff">00434</a>       <span class="keyword">typedef</span> <a class="code" href="../../df/d02/classTREX_1_1transaction_1_1details_1_1external.html" title="An external timeline.">details::external</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8732d422d9951bde9c8fb33c702d18ff" title="Iterator other external timelines.">external_iterator</a>;
<a name="l00440"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4a82613363d6c1dfb380d73165b888a7">00440</a>       <span class="keyword">typedef</span> <span class="keywordtype">size_t</span>            <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4a82613363d6c1dfb380d73165b888a7" title="size type">size_type</a>;
<a name="l00441"></a>00441 
<a name="l00446"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a29c22ff5792359d9dd5b87373f72bc25">00446</a>       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4a82613363d6c1dfb380d73165b888a7" title="size type">size_type</a>         <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a29c22ff5792359d9dd5b87373f72bc25" title="Number of External timelines.">count_externals</a>()<span class="keyword"> const </span>{
<a name="l00447"></a>00447        <span class="keywordflow">return</span> m_externals.size();
<a name="l00448"></a>00448       }
<a name="l00455"></a>00455       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8732d422d9951bde9c8fb33c702d18ff" title="Iterator other external timelines.">external_iterator</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a6b169e717e60724db87abbff21fffd83" title="beginning of External timelines set">ext_begin</a>();
<a name="l00462"></a>00462       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8732d422d9951bde9c8fb33c702d18ff" title="Iterator other external timelines.">external_iterator</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a74127fd53f9d89f938c7ab1273a2f59d" title="end of External timelines set">ext_end</a>();
<a name="l00463"></a>00463 
<a name="l00464"></a>00464       <span class="keyword">typedef</span> <a class="code" href="../../db/dfd/classTREX_1_1transaction_1_1details_1_1relation__iter.html" title="Iterator for reactors relations.">details::relation_iter</a> internal_iterator;
<a name="l00465"></a>00465       
<a name="l00475"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#acca6022515bb765ef0843759cbfb2e67">00475</a>       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4a82613363d6c1dfb380d73165b888a7" title="size type">size_type</a>     <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#acca6022515bb765ef0843759cbfb2e67" title="Count the number of internal timelines.">count_internals</a>()<span class="keyword"> const </span>{
<a name="l00476"></a>00476        <span class="keywordflow">return</span> m_internals.<a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html#a47958f2d980cded78b04c16804f09102" title="Number of element.">size</a>();
<a name="l00477"></a>00477       }
<a name="l00487"></a>00487       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4a82613363d6c1dfb380d73165b888a7" title="size type">size_type</a>     <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7e3964ee4535693c734e8fd4ea813343" title="Count the number of internal relations.">count_internal_relations</a>() <span class="keyword">const</span>;
<a name="l00488"></a>00488 
<a name="l00494"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aa9e8953c7f983b01c5841cb8289a3a9d">00494</a>       <a class="code" href="../../db/dfd/classTREX_1_1transaction_1_1details_1_1relation__iter.html" title="Iterator for reactors relations.">internal_iterator</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aa9e8953c7f983b01c5841cb8289a3a9d" title="First internal relation iterator.">int_begin</a>()<span class="keyword"> const </span>{
<a name="l00495"></a>00495        <span class="keywordflow">return</span> <a class="code" href="../../db/dfd/classTREX_1_1transaction_1_1details_1_1relation__iter.html" title="Iterator for reactors relations.">internal_iterator</a>(m_internals.<a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html#a816dc88801468d522c01fde8e4aa513c" title="Beginning iterator.">begin</a>(), m_internals.<a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html#aed83139d9f67a23c84e6760a4cac081e" title="End iterator.">end</a>());
<a name="l00496"></a>00496       }
<a name="l00502"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7f104cbecbcd6b55ca411dbc9addc2f7">00502</a>       <a class="code" href="../../db/dfd/classTREX_1_1transaction_1_1details_1_1relation__iter.html" title="Iterator for reactors relations.">internal_iterator</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7f104cbecbcd6b55ca411dbc9addc2f7" title="Last internal relation iterator.">int_end</a>()<span class="keyword"> const </span>{
<a name="l00503"></a>00503        <span class="keywordflow">return</span> <a class="code" href="../../db/dfd/classTREX_1_1transaction_1_1details_1_1relation__iter.html" title="Iterator for reactors relations.">internal_iterator</a>(m_internals.<a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html#aed83139d9f67a23c84e6760a4cac081e" title="End iterator.">end</a>(), m_internals.<a class="code" href="../../dc/d8c/classTREX_1_1utils_1_1list__set.html#aed83139d9f67a23c84e6760a4cac081e" title="End iterator.">end</a>());
<a name="l00504"></a>00504       }
<a name="l00505"></a>00505 
<a name="l00506"></a>00506     <span class="keyword">protected</span>:
<a name="l00518"></a>00518       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8499db1d82809eb0703f9a6741b35186" title="XML based constructor.">TeleoReactor</a>(<a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html" title="Transactions graph.">graph</a> *owner, <a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;name,
<a name="l00519"></a>00519                  <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> latency, <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> lookahead, <span class="keywordtype">bool</span> log=<span class="keyword">false</span>);
<a name="l00520"></a>00520 
<a name="l00525"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a975231dd2846e0a806833f93d79dabb5">00525</a>       <a class="code" href="../../d2/d8b/classTREX_1_1utils_1_1LogManager.html" title="Centralized logging and files management.">TREX::utils::LogManager</a> &amp;<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a975231dd2846e0a806833f93d79dabb5" title="LogManager acces point.">manager</a>()<span class="keyword"> const </span>{
<a name="l00526"></a>00526        <span class="keywordflow">return</span> m_graph.manager();
<a name="l00527"></a>00527       }
<a name="l00528"></a>00528 
<a name="l00546"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a9f4efc90e8e0fb488f788b921546f802">00546</a>       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a9f4efc90e8e0fb488f788b921546f802" title="Check if need to deliberate.">hasWork</a>() {
<a name="l00547"></a>00547        <span class="keywordflow">return</span> <span class="keyword">false</span>;
<a name="l00548"></a>00548       }
<a name="l00549"></a>00549 
<a name="l00550"></a>00550 
<a name="l00572"></a>00572       <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#aa9840ea85833e5e458ac215635266316" title="Produce an observation.">postObservation</a>(<a class="code" href="../../de/d8d/classTREX_1_1transaction_1_1Observation.html" title="Reactor observation.">Observation</a> <span class="keyword">const</span> &amp;o);
<a name="l00573"></a>00573 
<a name="l00600"></a>00600       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7a7dccda4fe6c2d33067f56d234eda5b" title="Post a goal.">postGoal</a>(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g);
<a name="l00616"></a>00616       <a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7a7dccda4fe6c2d33067f56d234eda5b" title="Post a goal.">postGoal</a>(<a class="code" href="../../d0/d04/classTREX_1_1transaction_1_1Goal.html" title="TREX goal.">Goal</a> <span class="keyword">const</span> &amp;g);
<a name="l00629"></a>00629       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ad21eb1f4f7dd6affb3e4b4fe1f256a93" title="Goal completion.">completedGoal</a>(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> g);
<a name="l00630"></a>00630 
<a name="l00650"></a>00650       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a07ae5287e1383b9f2f2730899a3c6a15" title="Post a planned token.">postPlanToken</a>(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g);
<a name="l00668"></a>00668       <a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a07ae5287e1383b9f2f2730899a3c6a15" title="Post a planned token.">postPlanToken</a>(<a class="code" href="../../d0/d04/classTREX_1_1transaction_1_1Goal.html" title="TREX goal.">Goal</a> <span class="keyword">const</span> &amp;g);
<a name="l00669"></a>00669       <span class="keywordtype">void</span> cancelPlanToken(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g);
<a name="l00670"></a>00670       
<a name="l00671"></a>00671       
<a name="l00691"></a>00691       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4e7cd4e809a411032c47e66eb09fa8d7" title="Recall a goal.">postRecall</a>(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g);
<a name="l00692"></a>00692 
<a name="l00705"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a69980762bfeee1f1475c29e4b88a1251">00705</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a69980762bfeee1f1475c29e4b88a1251" title="reactor initialiszation callback">handleInit</a>() {}
<a name="l00717"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a84bf72ed467a7f76cec0fa3714f0df80">00717</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a84bf72ed467a7f76cec0fa3714f0df80" title="New tick callback.">handleTickStart</a>() {}
<a name="l00718"></a>00718 
<a name="l00738"></a>00738       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#adc060d0fea8604e2dc9ed7a9ab37f62b" title="Synchronization callback.">synchronize</a>() =0;
<a name="l00739"></a>00739 
<a name="l00748"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a2d5869fac84e5e6f9170132a47fd1d1c">00748</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a2d5869fac84e5e6f9170132a47fd1d1c" title="Deliberation step callback.">resume</a>() {}
<a name="l00749"></a>00749 
<a name="l00759"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ad168ea32ebb729f0c866c16d37462c9c">00759</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ad168ea32ebb729f0c866c16d37462c9c" title="Goal reception callback.">handleRequest</a>(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g) {}
<a name="l00769"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8af8f0667a8831c6ad364850c6136ab1">00769</a>       <span class="keyword">virtual</span> <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8af8f0667a8831c6ad364850c6136ab1" title="Goal recall callback.">handleRecall</a>(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g) {}
<a name="l00770"></a>00770       
<a name="l00771"></a>00771       <span class="keyword">virtual</span> <span class="keywordtype">void</span> newPlanToken(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;t) {}
<a name="l00772"></a>00772       <span class="keyword">virtual</span> <span class="keywordtype">void</span> cancelledPlanToken(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;t) {}
<a name="l00773"></a>00773 
<a name="l00797"></a>00797       <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4c6dc39a343f4413b5bd8acd8213e740" title="External timeline declaration.">use</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;timeline, <span class="keywordtype">bool</span> control=<span class="keyword">true</span>, <span class="keywordtype">bool</span> plan_listen=<span class="keyword">false</span>);
<a name="l00798"></a>00798 
<a name="l00819"></a>00819       <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a3dc486c5b78514e5ae601c2b8147d497" title="Internal timeline declaration.">provide</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;timeline, <span class="keywordtype">bool</span> controllable=<span class="keyword">true</span>, <span class="keywordtype">bool</span> publish=<span class="keyword">false</span>);
<a name="l00820"></a>00820 
<a name="l00834"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ab028a1fb11c29f940332fcb3879af240">00834</a>       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ab028a1fb11c29f940332fcb3879af240" title="Request for external failed.">failed_external</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;timeline,
<a name="l00835"></a>00835                                <a class="code" href="../../de/dc9/structTREX_1_1transaction_1_1graph_1_1timeline__failure.html" title="Timeline relation creation failure.">graph::timeline_failure</a> <span class="keyword">const</span> &amp;err) {
<a name="l00836"></a>00836         <span class="keywordflow">throw</span> err;
<a name="l00837"></a>00837       }
<a name="l00851"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ae462eb24d0e453b00ff806f27f9678bd">00851</a>       <span class="keyword">virtual</span> <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#ae462eb24d0e453b00ff806f27f9678bd" title="Request for internal failed.">failed_internal</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;timeline,
<a name="l00852"></a>00852                                <a class="code" href="../../de/dc9/structTREX_1_1transaction_1_1graph_1_1timeline__failure.html" title="Timeline relation creation failure.">graph::timeline_failure</a> <span class="keyword">const</span> &amp;err) {
<a name="l00853"></a>00853         <span class="keywordflow">throw</span> err;
<a name="l00854"></a>00854       }
<a name="l00865"></a>00865       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a9d8c2a89f8940138216a1f7821adfb04" title="Check for internal timeline.">isInternal</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;timeline) <span class="keyword">const</span>;
<a name="l00876"></a>00876       <span class="keywordtype">bool</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a41d3bf0d0663f3ff4469686dc6878d01" title="Check for exeternal timeline.">isExternal</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;timeline) <span class="keyword">const</span>;
<a name="l00877"></a>00877 
<a name="l00889"></a>00889       <a class="code" href="../../da/d38/classTREX_1_1utils_1_1internals_1_1LogEntry.html" title="Text Entry manager for TextLog.">TREX::utils::internals::LogEntry</a>
<a name="l00890"></a><a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#abde1d28e37984ab0a0ae71a6023bcd8b">00890</a>       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#abde1d28e37984ab0a0ae71a6023bcd8b" title="new log entry">syslog</a>(std::string <span class="keyword">const</span> &amp;context=std::string()) {
<a name="l00891"></a>00891        <span class="keywordflow">if</span>( context.empty() )
<a name="l00892"></a>00892          <span class="keywordflow">return</span> m_graph.syslog(<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8facf8e8ea1ba386fa07bffb25881379" title="Reactor name.">getName</a>().str());
<a name="l00893"></a>00893        <span class="keywordflow">else</span>
<a name="l00894"></a>00894          <span class="keywordflow">return</span> m_graph.syslog(<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8facf8e8ea1ba386fa07bffb25881379" title="Reactor name.">getName</a>().str()+<span class="stringliteral">&quot;|&quot;</span>+context);
<a name="l00895"></a>00895       }
<a name="l00896"></a>00896 
<a name="l00904"></a>00904       <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a8732d422d9951bde9c8fb33c702d18ff" title="Iterator other external timelines.">external_iterator</a> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a839223057c856427799bf087f60c670b" title="Find an external timeline.">find_external</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;name);
<a name="l00905"></a>00905 
<a name="l00906"></a>00906     <span class="keyword">private</span>:
<a name="l00907"></a>00907 <span class="preprocessor"># if defined(BOOST_CHRONO_HAS_THREAD_CLOCK)</span>
<a name="l00908"></a>00908 <span class="preprocessor"></span>      <span class="keyword">typedef</span> boost::chrono::thread_clock stat_clock;
<a name="l00909"></a>00909 <span class="preprocessor"># else </span>
<a name="l00910"></a>00910 <span class="preprocessor"></span>      <span class="keyword">typedef</span> boost::chrono::process_user_cpu_clock stat_clock;        
<a name="l00911"></a>00911 <span class="preprocessor"># endif // BOOST_CHRONO_HAS_THREAD_CLOCK</span>
<a name="l00912"></a>00912 <span class="preprocessor"></span>      <span class="keyword">typedef</span> stat_clock::duration stat_duration; 
<a name="l00913"></a>00913       stat_duration m_synch_usage, m_deliberation_usage;
<a name="l00914"></a>00914       
<a name="l00915"></a>00915       std::ofstream m_stat_log;
<a name="l00916"></a>00916 
<a name="l00917"></a>00917       <span class="keywordtype">void</span> clear_internals();
<a name="l00918"></a>00918       <span class="keywordtype">void</span> clear_externals();
<a name="l00919"></a>00919 
<a name="l00920"></a>00920       <span class="keywordtype">bool</span> m_inited;
<a name="l00921"></a>00921       <span class="keywordtype">bool</span> m_firstTick;
<a name="l00922"></a>00922       <a class="code" href="../../d5/d45/classTREX_1_1transaction_1_1graph.html" title="Transactions graph.">graph</a> &amp;m_graph;
<a name="l00923"></a>00923 
<a name="l00942"></a>00942       <span class="keyword">class </span>Logger {
<a name="l00943"></a>00943       <span class="keyword">public</span>:
<a name="l00950"></a>00950        Logger(std::string <span class="keyword">const</span> &amp;dest);
<a name="l00956"></a>00956        ~Logger();
<a name="l00957"></a>00957         
<a name="l00962"></a>00962        <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a3dc486c5b78514e5ae601c2b8147d497" title="Internal timeline declaration.">provide</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;name);
<a name="l00967"></a>00967        <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a4c6dc39a343f4413b5bd8acd8213e740" title="External timeline declaration.">use</a>(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;name);
<a name="l00968"></a>00968 
<a name="l00973"></a>00973        <span class="keywordtype">void</span> unprovide(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;name);
<a name="l00978"></a>00978        <span class="keywordtype">void</span> unuse(<a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> <span class="keyword">const</span> &amp;name);
<a name="l00979"></a>00979 
<a name="l00984"></a>00984        <span class="keywordtype">void</span> <a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html#a7efd36a98191a8fbb3fac34220684c2f" title="New tick notification callback.">newTick</a>(<a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> val);
<a name="l00985"></a>00985 
<a name="l00989"></a>00989        <span class="keywordtype">void</span> observation(<a class="code" href="../../de/d8d/classTREX_1_1transaction_1_1Observation.html" title="Reactor observation.">Observation</a> <span class="keyword">const</span> &amp;obs);
<a name="l00993"></a>00993        <span class="keywordtype">void</span> request(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;goal);
<a name="l00997"></a>00997        <span class="keywordtype">void</span> recall(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;goal);
<a name="l00998"></a>00998         
<a name="l00999"></a>00999         <span class="keywordtype">void</span> notifyPlan(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;t);
<a name="l01000"></a>01000         <span class="keywordtype">void</span> cancelPlan(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;t);
<a name="l01001"></a>01001 
<a name="l01002"></a>01002 
<a name="l01003"></a>01003       <span class="keyword">private</span>:
<a name="l01006"></a>01006        std::ofstream m_file;
<a name="l01011"></a>01011        <span class="keywordtype">bool</span> m_tick;
<a name="l01018"></a>01018         <span class="keywordtype">bool</span> m_hasData;
<a name="l01024"></a>01024        <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> m_current;
<a name="l01025"></a>01025 
<a name="l01031"></a>01031        <span class="keywordtype">void</span> openTick();
<a name="l01032"></a>01032       }; <span class="comment">// TREX::transaction::TeleoReactor::Logger</span>
<a name="l01033"></a>01033 
<a name="l01046"></a>01046       <span class="keywordtype">void</span>   doNotify();
<a name="l01047"></a>01047 
<a name="l01060"></a>01060        Logger *m_trLog;
<a name="l01061"></a>01061 
<a name="l01069"></a>01069       <a class="code" href="../../dc/de0/classTREX_1_1utils_1_1BasicSymbol.html">TREX::utils::Symbol</a> m_name;
<a name="l01070"></a>01070 
<a name="l01079"></a>01079       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> m_latency;
<a name="l01080"></a>01080       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> m_maxDelay;
<a name="l01085"></a>01085       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> m_lookahead;
<a name="l01086"></a>01086 
<a name="l01091"></a>01091       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a>   m_initialTick;
<a name="l01097"></a>01097       <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a>   m_finalTick;
<a name="l01098"></a>01098 
<a name="l01099"></a>01099 
<a name="l01100"></a>01100       <span class="keywordtype">void</span> reset_deadline();
<a name="l01115"></a>01115       <span class="keyword">mutable</span> <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> m_deadline;
<a name="l01129"></a>01129       <span class="keyword">mutable</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> m_nSteps;
<a name="l01130"></a>01130       <span class="keyword">mutable</span> <span class="keywordtype">bool</span> m_past_deadline;
<a name="l01131"></a>01131       <span class="keyword">mutable</span> <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> m_validSteps;
<a name="l01132"></a>01132 
<a name="l01133"></a>01133       <a class="code" href="../../db/db4/group__transaction.html#ga85e33a6d5a14bff2efc0b3832a1cf3c3" title="external timelines">external_set</a> m_externals;
<a name="l01134"></a>01134       internal_set m_internals;
<a name="l01135"></a>01135       internal_set m_updates;
<a name="l01136"></a>01136 
<a name="l01143"></a>01143       <a class="code" href="../../d1/dd0/structTREX_1_1utils_1_1SingletonUse.html">TREX::utils::SingletonUse&lt;TREX::utils::LogManager&gt;</a> m_log;
<a name="l01144"></a>01144 
<a name="l01145"></a>01145       <span class="keywordtype">void</span> isolate() {
<a name="l01146"></a>01146        clear_internals();
<a name="l01147"></a>01147        clear_externals();
<a name="l01148"></a>01148       }
<a name="l01149"></a>01149 
<a name="l01150"></a>01150       <span class="comment">// call-backs from timeline</span>
<a name="l01151"></a>01151       <span class="keywordtype">void</span> assigned(details::timeline *tl);
<a name="l01152"></a>01152       <span class="keywordtype">void</span> unassigned(details::timeline *tl);
<a name="l01153"></a>01153       <span class="keywordtype">void</span> subscribed(Relation <span class="keyword">const</span> &amp;r);
<a name="l01154"></a>01154       <span class="keywordtype">void</span> unsubscribed(Relation <span class="keyword">const</span> &amp;r);
<a name="l01155"></a>01155       <span class="keywordtype">void</span> latency_updated(<a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> old_l, <a class="code" href="../../db/db4/group__transaction.html#ga71ccb7c46d43d3d538c401886b341ada" title="TREX unit of time   .">TICK</a> new_l);
<a name="l01156"></a>01156 
<a name="l01157"></a>01157 
<a name="l01158"></a>01158       <span class="keyword">friend</span> <span class="keyword">class </span>details::timeline;
<a name="l01159"></a>01159       <span class="keyword">friend</span> <span class="keyword">class </span>details::external;
<a name="l01160"></a>01160       <span class="keyword">friend</span> <span class="keyword">class </span>ReactorException;
<a name="l01161"></a>01161       <span class="keyword">friend</span> <span class="keyword">class </span>Relation;
<a name="l01162"></a>01162 
<a name="l01163"></a>01163       <span class="keyword">friend</span> <span class="keyword">class </span>graph;
<a name="l01164"></a>01164     }; <span class="comment">// TREX::transaction::TeleoReactor</span>
<a name="l01165"></a>01165 
<a name="l01175"></a><a class="code" href="../../d8/dfd/classTREX_1_1transaction_1_1SynchronizationError.html">01175</a>     <span class="keyword">class </span><a class="code" href="../../d8/dfd/classTREX_1_1transaction_1_1SynchronizationError.html" title="Synchronization related exception.">SynchronizationError</a> :<span class="keyword">public</span> <a class="code" href="../../d6/d6d/classTREX_1_1transaction_1_1ReactorException.html" title="TeleoReactor related exception.">ReactorException</a> {
<a name="l01176"></a>01176     <span class="keyword">public</span>:
<a name="l01182"></a><a class="code" href="../../d8/dfd/classTREX_1_1transaction_1_1SynchronizationError.html#ad3f668ce54bedd45d0a51ba8e48921ac">01182</a>       <a class="code" href="../../d8/dfd/classTREX_1_1transaction_1_1SynchronizationError.html#ad3f668ce54bedd45d0a51ba8e48921ac" title="Constructor.">SynchronizationError</a>(<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html" title="TeleoReactor abstract interface.">TeleoReactor</a> <span class="keyword">const</span> &amp;r, std::string <span class="keyword">const</span> &amp;msg) <span class="keywordflow">throw</span>()
<a name="l01183"></a>01183        :<a class="code" href="../../d6/d6d/classTREX_1_1transaction_1_1ReactorException.html#a9ead4c49c0d20eb2d7635ef8f8c1c16e" title="Constructor.">ReactorException</a>(r, msg) {}
<a name="l01185"></a><a class="code" href="../../d8/dfd/classTREX_1_1transaction_1_1SynchronizationError.html#a0600ed58d036c5ae035ebe6bb15450dc">01185</a>       <a class="code" href="../../d8/dfd/classTREX_1_1transaction_1_1SynchronizationError.html#a0600ed58d036c5ae035ebe6bb15450dc" title="Desturctor.">~SynchronizationError</a>() throw() {}
<a name="l01186"></a>01186     }; <span class="comment">// TREX::transaction::SynchronizationError</span>
<a name="l01187"></a>01187 
<a name="l01196"></a><a class="code" href="../../d4/d2a/classTREX_1_1transaction_1_1DispatchError.html">01196</a>     <span class="keyword">class </span><a class="code" href="../../d4/d2a/classTREX_1_1transaction_1_1DispatchError.html" title="Goal posting error.">DispatchError</a> :<span class="keyword">public</span> <a class="code" href="../../d6/d6d/classTREX_1_1transaction_1_1ReactorException.html" title="TeleoReactor related exception.">ReactorException</a> {
<a name="l01197"></a>01197     <span class="keyword">public</span>:
<a name="l01203"></a><a class="code" href="../../d4/d2a/classTREX_1_1transaction_1_1DispatchError.html#a8ba3063e694e2e7fb5c9b49765ac89c6">01203</a>       <a class="code" href="../../d4/d2a/classTREX_1_1transaction_1_1DispatchError.html#a8ba3063e694e2e7fb5c9b49765ac89c6">DispatchError</a>(<a class="code" href="../../df/d7a/classTREX_1_1transaction_1_1TeleoReactor.html" title="TeleoReactor abstract interface.">TeleoReactor</a> <span class="keyword">const</span> &amp;r, <a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g, std::string <span class="keyword">const</span> &amp;msg) <span class="keywordflow">throw</span>()
<a name="l01204"></a>01204        :<a class="code" href="../../d6/d6d/classTREX_1_1transaction_1_1ReactorException.html#a9ead4c49c0d20eb2d7635ef8f8c1c16e" title="Constructor.">ReactorException</a>(r, build_msg(g, msg)) {}
<a name="l01206"></a><a class="code" href="../../d4/d2a/classTREX_1_1transaction_1_1DispatchError.html#a81b7e6b95fb7d4cc4bd8c3a8b85e6730">01206</a>       <a class="code" href="../../d4/d2a/classTREX_1_1transaction_1_1DispatchError.html#a81b7e6b95fb7d4cc4bd8c3a8b85e6730" title="Destructor.">~DispatchError</a>() throw() {}
<a name="l01207"></a>01207 
<a name="l01208"></a>01208     <span class="keyword">private</span>:
<a name="l01215"></a>01215       <span class="keyword">static</span> std::string build_msg(<a class="code" href="../../db/db4/group__transaction.html#ga12f8cf7d56f88a24ecf3be17dca87d45" title="A goal identifier.">goal_id</a> <span class="keyword">const</span> &amp;g, std::string <span class="keyword">const</span> &amp;msg) <span class="keywordflow">throw</span>();
<a name="l01216"></a>01216     };
<a name="l01217"></a>01217 
<a name="l01218"></a>01218 
<a name="l01219"></a>01219   } <span class="comment">// TREX::transaction</span>
<a name="l01220"></a>01220 } <span class="comment">// TREX</span>
<a name="l01221"></a>01221 
<a name="l01222"></a>01222 <span class="preprocessor"># include &quot;<a class="code" href="../../d3/dfa/bgl__support_8hh.html" title="Boost Graph Library support code.">bits/bgl_support.hh</a>&quot;</span>
<a name="l01223"></a>01223 <span class="preprocessor"># include &quot;bits/reactor_graph.tcc&quot;</span>
<a name="l01224"></a>01224 
<a name="l01225"></a>01225 <span class="preprocessor">#endif</span>
</pre></div></div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 10 2012 11:09:44 for trex by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
