<?xml version="1.0"?>

<Agent name="DTA" finalTick="1000000" >
  <Plugin name="mbari_europa_pg"/> <!-- load MBARI specific europa extensions -->
  <Plugin name="europa_pg"/>       <!-- load trex europa reactor -->
  <Plugin name="dta_pg"/>          <!-- load the dta plugin used to connect to ODSS amqp streams -->
  <Plugin name="iridium_pg" />     <!-- load the reactor that will post goals to dorado -->
  <Plugin name="witre_pg"/>        <!-- load witre to have a simple web interface to T-REX -->

  <!-- RealTime tick="60"/ --> <!-- The tick rate is set to 1 minute -->

  <!-- the europa reactor that will tie everything together -->
  <!-- EuropaReactor name="dta" lookahead="0" latency="0"
		 solverConfig="dta.solver.xml"/ -->

  <!-- A reactor that can listen to amqp messages from odss and convert 
     the information into timelines -->
  <!-- DrifterTracker name="amqp" lookahead="1" latency="0" log="1">
    <Tracker exchange="auvs" asset="dorado" /> 
    <Tracker exchange="drifters" asset="stella101" />
    <MBFD exchange="SensorMessagesFromTrex" route="SensorApp" /> 
  </DrifterTracker -->  

  <!-- Replace reactor above by this one to replay the log -->
  <LogPlayer name="amqp" lookahead="1" latency="0" log="0"/>
    

  <DTAiridium name="dorado_out" lookahead="1" latency="0" log="1"
	      imei="300025010809770" host="mbarimail.mbari.org" 
	      from="fpy@mbari.org"
	      iridium="0" to="fpy@mbari.org" />

  <!-- there should be a new reactor in the future that send messages to dorado through sbd -->
  <!-- SBDPoster name="dorado" lookahead="15" latency="2" log="1"
    imei="whatever">
    <Timeline name="mygoals"/>
  </SBDPoster -->

  <!-- A basic web interface for the agent -->
  <WitreReactor name="DTA" latency="0" lookahead="0" log="0"/> 

  <Goal on="dorado_survey" pred="Track">
    <Variable name="size">
      <float min="500.0" max="500.0"/>
    </Variable>
    <Variable name="path">
      <enum>
	<elem value="square"/>
      </enum>
    </Variable>
    <Variable name="drifter">
      <enum>
	<elem value="stella101"/>
      </enum>
    </Variable>
  </Goal>
</Agent>
